apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: springpetclinicapiget2
  description: The spring-petclinic API
  tags:
    - owner
spec:
  type: openapi
  lifecycle: experimental
  owner: teamacic
  definition: |
    openapi: 3.0.0
    info:
      title: Spring PetClinic
      description: Spring PetClinic Sample Application.
      license:
        name: Apache 2.0
        url: http://www.apache.org/licenses/LICENSE-2.0
      version: '1.0'
    servers:
    - url: http://tap-spring-petclinic-git.cnr.tap.tanzu.vxlab.local
    - url: http://tap-spring-petclinic-scan.cnr.tap.tanzu.vxlab.local
    - url: http://tap-spring-petclinic-approve.cnr.tap.tanzu.vxlab.local
    tags:
    - name: owner
      description: Endpoints related to pet owners.
    paths:
      /owners:
        get:
          tags:
            - owner
          operationId: listOwners
          summary: Lists pet owners
          description: Returns an array of pet owners.
          parameters:
          - name: lastName
            in: query
            description: Last name.
            required: false
            schema:
              type: string
              example: Davis
          responses:
            200:
              description: Owner details found and returned.
              headers:
                ETag:
                  description: An ID for this version of the response.
                  schema:
                    type: string
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: '#/components/schemas/Owner'
    components:
      schemas:
        OwnerFields:
          title: Owner fields
          description: Editable fields of a pet owner.
          type: object
          properties:
            firstName:
              title: First name
              description: The first name of the pet owner.
              type: string
              minLength: 1
              maxLength: 30
              pattern: '^[a-zA-Z]*$'
              example: George
            lastName:
              title: Last name
              description: The last name of the pet owner.
              type: string
              minLength: 1
              maxLength: 30
              pattern: '^[a-zA-Z]*$'
              example: Franklin
            address:
              title: Address
              description: The postal address of the pet owner.
              type: string
              minLength: 1
              maxLength: 255
              example: '110 W. Liberty St.'
            city:
              title: City
              description: The city of the pet owner.
              type: string
              minLength: 1
              maxLength: 80
              example: Madison
            telephone:
              title: Telephone number
              description: The telephone number of the pet owner.
              type: string
              minLength: 1
              maxLength: 20
              pattern: '^[0-9]*$'
              example: '6085551023'
    Owner:
      title: Owner
      description: A pet owner.
      allOf:
        - $ref: '#/components/schemas/OwnerFields'
        - type: object
          properties:
            id:
              title: ID
              description: The ID of the pet owner.
              type: integer
              format: int32
              minimum: 0
              example: 1
              readOnly: true
            pets:
              title: Pets
              description: The pets owned by this individual including any booked vet visits.
              type: array
              items:
                $ref: '#/components/schemas/Pet'
              readOnly: true
          required: 
          - id
          - pets